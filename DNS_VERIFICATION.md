# DNS設定の詳細確認手順

設定が完了しているのにDNSエラーが出る場合の確認手順です。

## 🔍 確認すべきポイント

### 1. DNS設定の詳細確認

#### Aレコードが正しく設定されているか確認

ドメインプロバイダーの管理画面で、以下を確認してください：

- [ ] **Aレコードが4つすべて追加されている**
  - `@` → `185.199.108.153`
  - `@` → `185.199.109.153`
  - `@` → `185.199.110.153`
  - `@` → `185.199.111.153`

- [ ] **ホスト名が正しい**
  - `@` または空白（ルートドメイン）
  - `www` ではない（wwwの場合はCNAMEレコードが必要）

- [ ] **IPアドレスが正確**
  - コピペミスがないか確認
  - スペースや余分な文字が入っていないか確認

- [ ] **設定が保存されている**
  - 「保存」「設定する」「反映」などのボタンをクリックしたか確認

#### 他のレコードが干渉していないか確認

- [ ] **CNAMEレコードがルートドメインに設定されていない**
  - ルートドメイン（`@`）にはAレコードのみ
  - CNAMEレコードは `www` サブドメインのみ

- [ ] **古いAレコードが残っていない**
  - 間違ったIPアドレスのAレコードが残っていないか確認

### 2. GitHub Pagesの設定確認

GitHubリポジトリの **Settings > Pages** で以下を確認：

- [ ] **Custom domain** に `jigsawpuzzlesimple.com` が入力されている
  - `www.jigsawpuzzlesimple.com` ではない
  - スペースや余分な文字が入っていない

- [ ] **Save** をクリックした
  - 入力しただけで保存していない可能性がある

- [ ] **エラーメッセージの確認**
  - 「InvalidDNSError」などのエラーメッセージが表示されていないか
  - エラーメッセージの内容を確認

### 3. DNS設定の反映確認

#### コマンドラインで確認

```bash
# シンプルな確認
dig jigsawpuzzlesimple.com +short

# 詳細な確認
dig jigsawpuzzlesimple.com A +noall +answer

# 別の方法
nslookup jigsawpuzzlesimple.com
host jigsawpuzzlesimple.com
```

**期待される結果**: 
```
185.199.108.153
185.199.109.153
185.199.110.153
185.199.111.153
```

#### Webツールで確認

以下のツールで世界中のDNSサーバーから確認：

1. **whatsmydns.net**
   - https://www.whatsmydns.net/
   - `jigsawpuzzlesimple.com` を検索
   - A Record を選択
   - 地図上で緑色（反映済み）が増えているか確認

2. **mxtoolbox.com**
   - https://mxtoolbox.com/DNSLookup.aspx
   - `jigsawpuzzlesimple.com` を検索
   - A Records セクションで4つのIPアドレスが表示されるか確認

### 4. ネームサーバーの確認

ドメインプロバイダーの管理画面で、ネームサーバーが正しく設定されているか確認：

- [ ] **ネームサーバーが正しく設定されている**
  - プロバイダーのデフォルトネームサーバーが設定されている
  - カスタムネームサーバーを使用している場合は、その設定が正しい

## ⏰ DNS設定の反映時間

DNS設定の変更が反映されるまで：

- **最短**: 数分
- **通常**: 30分〜1時間
- **最大**: 48時間

設定を変更した直後は、反映されるまで時間がかかります。

## 🔧 トラブルシューティング

### 問題1: DNS設定を追加したが、まだ反映されない

**解決方法**:
1. 設定を保存したか確認
2. 30分〜1時間待つ
3. `dig jigsawpuzzlesimple.com +short` で再確認
4. まだ反映されない場合は、プロバイダーのサポートに問い合わせ

### 問題2: Aレコードが4つ表示されない

**解決方法**:
1. ドメインプロバイダーの管理画面で、4つすべてのAレコードが追加されているか確認
2. 設定を再保存する
3. 時間を置いて再確認

### 問題3: GitHub Pagesで「InvalidDNSError」が表示される

**解決方法**:
1. DNS設定が正しく反映されているか確認（上記の方法で）
2. GitHub Pagesの設定で、Custom domainを一度削除して再入力
3. Saveをクリック
4. 数時間待ってから再確認

### 問題4: 一部の地域でしかアクセスできない

**解決方法**:
- DNS設定の反映には時間がかかります
- 世界中のDNSサーバーに反映されるまで、最大48時間かかることがあります
- whatsmydns.netで世界中の反映状況を確認できます

## 📋 チェックリスト

以下の項目をすべて確認してください：

- [ ] ドメインプロバイダーの管理画面で、Aレコードが4つすべて追加されている
- [ ] ホスト名が `@` または空白になっている
- [ ] IPアドレスが正確（コピペミスがない）
- [ ] 設定を保存した
- [ ] GitHub PagesのCustom domainに `jigsawpuzzlesimple.com` が入力されている
- [ ] GitHub Pagesの設定でSaveをクリックした
- [ ] 30分以上経過している
- [ ] `dig jigsawpuzzlesimple.com +short` でIPアドレスが表示される
- [ ] whatsmydns.netでDNS設定が反映されているか確認した

すべてチェックが付いているのに、まだエラーが出る場合は、プロバイダーのサポートに問い合わせることをお勧めします。

